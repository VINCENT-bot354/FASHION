                            <div class="ajax-status-message alert d-none mb-3"></div>
                            
                            <form id="product-update-form-{{ loop.index }}" class="row g-3 ajax-form" action="{{ url_for('update_product') }}" method="POST" data-product-id="{{ loop.index }}">
                                <input type="hidden" name="name" value="{{ product.name }}">
                                
                                <div class="col-md-6">
                                    <label class="form-label">Product Name</label>
                                    <input type="text" class="form-control" value="{{ product.name }}" disabled>
                                </div>
                                
                                <div class="col-md-6">
                                    <label class="form-label">Type</label>
                                    <input type="text" class="form-control" name="type" value="{{ product.type }}">
                                </div>
                                
                                <div class="col-md-6">
                                    <label class="form-label">Color</label>
                                    <input type="text" class="form-control" name="color" value="{{ product.color }}">
                                </div>
                                
                                <div class="col-md-6">
                                    <label class="form-label">Size</label>
                                    <input type="text" class="form-control" name="size" value="{{ product.size }}">
                                </div>
                                
                                <div class="col-md-6">
                                    <label class="form-label">Price (KES)</label>
                                    <input type="text" class="form-control" name="price" value="{{ product.price }}">
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="form-check mt-4">
                                        <input class="form-check-input" type="checkbox" name="featured" id="featured-{{ loop.index }}" {% if product.featured %}checked{% endif %}>
                                        <label class="form-check-label" for="featured-{{ loop.index }}">
                                            Featured on Homepage
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="col-12 mt-3">
                                    <button type="submit" class="btn admin-btn me-2">Save Changes</button>
                                    <button type="button" class="btn btn-secondary cancel-edit-btn" data-product-id="{{ loop.index }}">Cancel</button>
                                </div>
                            </form>
                            
                            <div class="mt-4">
                                <h5>Upload Product Image</h5>
                                <div class="ajax-status-message alert d-none mb-3"></div>
                                <form id="image-upload-form-{{ loop.index }}" class="ajax-image-form mt-2" action="{{ url_for('upload_image', product_name=product.name) }}" method="POST" enctype="multipart/form-data" data-product-id="{{ loop.index }}">
                                    <div class="row g-3 align-items-end">
                                        <div class="col-md-6">
                                            <label class="form-label">Image File (jpg, jpeg, png, gif)</label>
                                            <input type="file" class="form-control product-image-input" name="image" accept=".jpg,.jpeg,.png,.gif" data-preview="image-preview-{{ loop.index }}">
                                            <small class="text-muted">Image will be automatically named "{{ product.name | lower }}.jpg" (or other extension)</small>
                                        </div>
                                        <div class="col-md-3">
                                            <img id="image-preview-{{ loop.index }}" src="#" alt="Preview" style="display: none; max-height: 100px; max-width: 100%;">
                                        </div>
                                        <div class="col-md-3">
                                            <button type="submit" class="btn admin-btn w-100">Upload Image</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
